## 6. Типы данных

## 6.1. Строки (string)

Строка – набор символов, заключенный в одиночные `''` или двойные кавычки `""`:

```php
<?php
$first_animal = 'Cat';
$second_animal = "Dog";
```

Какой вид кавычек использовать для оформления строк - одинарные или двойные кавычки?

Давайте разберем разницу между двойными и одинарными кавычками в PHP, и на примерах выясним, когда какие нужно использовать.

Переменные и экранирующие последовательности для специальных символов, встречающихся в строках, заключенных в одинарные кавычки - не обрабатываются. Строки, обрамленные апострофами, обрабатываются интерпретатором PHP гораздо быстрее, чем аналогичные строки, окруженные двойными кавычками.

Причина здесь проста: строки в двойных кавычках интерпретатор PHP дополнительно проверяет на наличие переменных и если такие находятся, то вместо имени переменной в строку вставляется ее значение. А вот строка, заключенная в апострофы, воспринимается интерпретатором как обычный текст и никаких преобразований в этих строках PHP не проводит. 

### Конкатенация строк

Оператор конкатенации точка `.` соединяет левый и правый аргументы:

```php
<?php
$first_animal = 'Cat';
$second_animal = 'Dog';
$animals = $first_animal . $second_animal;

echo "$animals"; // CatDog
```

Оператор присваивания с конкатенацией `.=` присоединяет правый аргумент к левому:

```php
<?php
$first_animal = 'Cat';
$second_animal = 'Dog';
$third_animal = 'Giraffe';
$animals = $first_animal;
$animals .= $second_animal;
$animals .= $third_animal;

echo "$animals"; // CatDogGiraffe
```

Чтобы перенести слово на новую строку воспользуемся символом переноса `\n`, который работает только в двойных кавычках:

```php
<?php
$first_animal = "Cat\n";
$second_animal = "Dog\n";
$third_animal = "Giraffe";
$animals = $first_animal;
$animals .= $second_animal;
$animals .= $third_animal;

echo "$animals";


/*
Cat
Dog
Giraffe
 */
```



## 6.2. Числа

## 6.2.1 Целое число (integer) 

Не имеет дробной части:

```php
<?php
$number_one = 5678; // целое положительное число
$number_two = -5678; // целое отрицательное число
```



## 6.2.2. Число с плавающей точкой (float)

Число с плавающей точкой имеет дробную часть и задается следующий образом:

```php
<?php
$number_one = 1.5678; // 1.5678 – положительное число с плавающей точкой
$number_two = -1.5678; // -1.5678 – отрицательное число с плавающей точкой
$number_three = 1.5678e0; // 1.5678 – положительное число с плавающей точкой
$number_four = 1.5678e2; //  156.78 – положительное число с плавающей точкой
$number_five = 1.5678E-2; // 0.015678 – положительное число с плавающей точкой
```

Чтобы узнать тип переменной воспользуемся функцией `gettype()`, а для преобразования числа с плавающей точкой в целое число функцией `intval()`:

```php
<?php
$number_one = 1.5678; // 1.5678 – положительное число с плавающей точкой

echo gettype($number_one); // double
$number_one = intval($number_one);
echo $number_one; // 1
echo gettype($number_one); // integer
```

### Арифметические операторы

| **Оператор** | **Операция**         |
| ------------ | -------------------- |
| +            | Сложение             |
| -            | Вычитание            |
| *            | Умножение            |
| /            | Деление              |
| %            | Деление по модулю    |
| **           | Возведение в степень |

Таблица 1. Арифметические операторы

```php
<?php
echo 2 + 4; // 6
echo 2 / 4; // 0.5
echo 2 * 4; // 8
echo 2 - 4; // -2
echo 2 % 4; // 2
echo 2 ** 4; // 16
```

Мы можем сложить два числа через запись `$number_one = $number_one + $number_two;` или через сокращенную запись `$number_one += $number_two;`:

```php
<?php
// полная запись
$number_one = 1;
$number_two = 3;
$number_one =  $number_one + $number_two;
echo $number_one; // 4

// сокращенная запись запись
$number_one = 1;
$number_two = 3;
$number_one += $number_two;
echo $number_one; // 4
```

### Операторы сравнения

Чтобы сравнить значения используют операторы сравнения, которые возвращают `true` или `false`:

```php
<?php
echo 4 > 0; // 1 – true
echo 4 <= 55; // 1 – true
echo 4 != 5; // 1 – true
echo 4 <=> 5; // -1
echo 4 <=> 4; // 0
echo 4 <=> 3; // 1
```

Если строка не содержит число, то интерпретатор PHP приводит значение строки к 0. Если в строке есть число и оно стоит после буквенных символов, то значение всей строки также приводится к 0. Если число стоит перед буквенными символами, то для сравнении берется только число.

```php
<?php
echo 0 == 'hello'; // true, так как 0 = 0
echo 0 == 'hello3555'; // true, так как 0 = 0
echo 0 == '3555hello'; // false, так как 0 не равно 3555
echo 3555 == '3555hello'; // true, так как 3555 равно 3555
```

| **Оператор** | **Значение**                                                 |
| ------------ | ------------------------------------------------------------ |
| $n == $m     | True, если $n равно $m                                       |
| $n === $m    | True, если $n равно $m и имеют одинаковые типы (строгое сравнение) |
| $n! = $m     | True, если $n не равна $m                                    |
| $n <> $m     | True, если $n не равна $m                                    |
| $n !== $m    | True, если отличаются тип или значение переменных (строгое сравнение) |
| $n < $m      | True, если $n меньше $m                                      |
| $n > $m      | True, если $n больше $m                                      |
| $n <= $m     | True, если $n меньше или равна $m                            |
| $n >= $m     | True, если $n больше или равна $m                            |
| $n <=> $m    | Возвращает -1, если $n меньше $m, 0 в случае равенства и 1, если $n больше $m |

Таблица 2. Операторы сравнения

### Порядок операций

Сначала считается выражение в скобках:

```php
<?php
print_r((2 * 4) + 5); // 13
```



## 6.3. Массивы (array)

Массивы – упорядоченная коллекция элементов с доступом по индексу или ключу. Индексный массив создается двумя способами:

Через функцию `array()`:

```php
<?php
$a = array('Cat', 'Dog', 123);
echo $a[1]; // Dog
```

и через квадратные скобки []:

```php
<?php
$a = ['Cat', 'Dog', 123];
echo $a[1]; // Dog
```

**Здесь**:

`echo $a[1]`– вывести на экран второй элемент массива.

Нумерация массива начинается с `0`. В нашем случаем элементу массива `Cat` соответствует порядковый номер `0`, `Dog` – `1`, `123` – `2`. Для обращения к элементу массива используется следующий синтаксис: `$имя_массива[индекс_элемента]`.

Рекомендуется объявлять массив через квадратные скобки, так как эта запись компактнее.

Создадим пустой массив:

```php
<?php
$a = [];
```

Добавим в него несколько элементов и выведем на экран его содержимое:

```php
<?php
$array = [];
$array[] = 'Cat';
$array[] = 'Dog';
$array[] = 123;

print_r($array);

/*
Array
(
    [0] => Cat
    [1] => Dog
    [2] => 123
)
*/
```

Чтобы добавить новый элемент мы использовали запись `$имя_массива[] = новый_элемент`. Первый добавленный элемент получает индекс `0`. Индексы следующих элементов увеличиваются на `1`. Можно задать индекс самостоятельно. Для этого в квадратных скобках укажем нужный нам индекс:

```php
<?php
$array = [];
$array[100] = 'Cat';
$array[0] = 'Dog';
$array[33] = 123;

print_r($array[0]); // Dog
```

При добавлении непронумерованного элемента `5000`, значение его индекса будет на единицу большего максимального значения индекса в массиве – `101`:

```php
<?php
$array = [];
$array[100] = 'Cat';
$array[0] = 'Dog';
$array[33] = 123;
print_r($array);

/*
Array
(
    [100] => Cat
    [0] => Dog
    [33] => 123
)
*/

$array[] = 5000;
print_r($array);

/*
Array
(
    [100] => Cat
    [0] => Dog
    [33] => 123
    [101] => 5000
)
*/
```

Для удаления элемента из массива воспользуемся функцией `unset()`:

```php
<?php
$array = ['Cat', 'Dog', 123];
unset($array[2]);
print_r($array);

/*
Array
(
    [0] => Cat
    [1] => Dog
)
*/
```

**Здесь**:

`unset($array[2])` – удаление третьего элемента массива.

В качестве индекса также используют строки:

```php
<?php
$array = [];
$array['animal_one'] = 'Cat';
$array['animal_two'] = 'Dog';
$array['number'] = 123;

print_r($array['animal_two']); // Dog
```

В таком случае мы получаем что-то напоминающее словари в других языках программирования с ключами и значениями. В PHP такой массив называют ассоциативным.

Ассоциативный массив объявляется через символы `=>`:

```php
$имя_словаря = ['ключ1' => 'значение1', 'ключ2' => 'значение2'];
```

Создадим ассоциативный массив:

```php
<?php
$array = ['first_key' => 'Cat', 'second_key' => 5000];
print_r($array);

/*
Array
(
    [first_key] => Cat
    [second_key] => 5000
)
*/
```

**Здесь**:

`'first_key'` – ключ.

`'Cat'`– значение.

Для поиска ключа по значению используем функцию `array_search():`

```php
<?php
$array = ['first_key' => 'Cat', 'second_key' => 5000];
print_r(array_search('Cat' ,$array)); // first_key
```

**Здесь**:

`array_search('Cat' ,$array)` – поиск ключа, соответствующего значению `Cat` в массиве `array`.

Чтобы подсчитать количество элементов в массиве воспользуемся функцией `count()`:

```php
<?php
$array = ['first_key' => 'Cat', 'second_key' => 5000];
print_r(count($array)); // 2
```

Также можно создать многомерный массив:

```php
<?php
$array = ['animals' => ['Cat', 'Dog'], 'second_array' => [5000, 33, ['third_array' => ['Hello']]]];
print_r($array['animals'][1]); // Dog
print_r($array['second_array'][2]['third_array'][0]); // Hello
```

`'animals' => ['Cat', 'Dog']` – ключ `animals` с двумя значениями: `Cat` и `Dog`.

`'second_array' => [5000, 33, ['third_array' => ['Hello']]]` – ключ `second_array` с тремя значениями: два числа `5000`, `33` и массив, но уже со своим ключом `third_array` и значением `Hello`.



## 6.3.1 Функции работы с массивами 

В PHP существует множество функций для работы с массивами. Для использования этих функций не требуется проведение установки дополнительных библиотек, поскольку такие функции являются частью ядра PHP. 

Подробнее о функциях сортировки массивов тут https://www.php.net/manual/ru/array.sorting.php

Другие функции для работы с массивами тут https://www.php.net/manual/ru/ref.array.php



## 6.4. Логический тип (boolean)

Логическая переменная может содержать одно из двух значений: `false (ложь)` или `true (истина)`. Вообще, любое ненулевое число (и непустая строка), а также ключевое слово true символизирует истину, тогда как 0, пустая строка и слово false — ложь. Таким образом, любое ненулевое выражение (в частности, значение переменной) рассматривается в логическом контексте как истина. Вы можете пользоваться константами false и true в зависимости от логики программы. При выполнении арифметических операций над логической переменной она преобразуется в обычную, числовую переменную. А именно, false рассматривается как 0, а true — как 1. 



## 6.5. Пустое значение (null)

Переменной можно присвоить специальную константу `null`, чтобы пометить ее особым образом. Тип этой константы — особый и называется также null. Это именно отдельный тип, и функция `gettype()`, которую мы вскоре рассмотрим, вернет для null переменной слово `null`. Допускается запись константы прописными буквами `NULL`, однако такая запись не рекомендуется стандартом `PSR-2`.



## 6.6. Ссылка на объект (object)

Ссылка на объект, который реализует несколько принципов объектно-ориентированного программирования. Внутренняя структура объекта похожа на ассоциативный массив, за исключением того, что для доступа к отдельным элементам (свойствам) и функциям (методам) объекта используется оператор `->`, а не квадратные скобки. Объекты подробно будут рассмотрены в темах ООП. 

> **Важно!**  Переменные в PHP хранят не сами объекты, а лишь ссылки на них. Это означает, что при копировании таких переменных (например, оператором $a = $obj) данные объекта в памяти не дублируются, и последующее изменение объекта
> $a повлечет за собой немедленное изменение объекта $obj. 




## 6.7. Ресурс (resource)

Некоторый ресурс, который PHP обрабатывает особым образом. Пример ресурса — переменная, содержащая дескриптор открытого файла. Такая переменная может в дальнейшем быть использована для того, чтобы указать PHP, с каким файлом нужно провести ту или иную операцию (например, прочитать строку). Другой пример: функция `imageCreate()` графической библиотеки GD создает в памяти новую "пустую" картинку указанного размера и возвращает ее идентификатор. Используя этот идентификатор, вы можете манипулировать картинкой (например, нарисовать в ней линию или вывести текст), а затем — сохранить результат в PNG- или JPEG-файл. 



## 6.8 Типизация

PHP не требует (и не поддерживает) явного типа при определении переменной; тип переменной определяется по контексту, в котором она используется. То есть, если вы присвоите значение типа string переменной $var, то $var изменит тип на string. Если вы затем присвоите $var значение типа int, она станет целым числом (int). 

Примером автоматического преобразования типа является оператор умножения '*'. Если какой-либо из операндов является float, то все операнды интерпретируются как float, и результатом также будет float. В противном случае операнды будут интерпретироваться как int и результат также будет int. Обратите внимание, что это *НЕ* меняет типы самих операндов; меняется только то, как они вычисляются и сам тип выражения.

```php
<?php
$foo = "1"; // $foo - это строка (ASCII-код 49)
$foo *= 2;  // $foo теперь целое число (2)
$foo = $foo * 1.3; // $foo теперь число с плавающей точкой (2.6)
$foo = 5 * "10 Little Piggies"; // $foo - это целое число (50)
$foo = 5 * "10 Small Pigs";   // $foo - это целое число (50)
?>
```

Подробнее о типизации и о приведении типов тут https://www.php.net/manual/ru/language.types.type-juggling.php



### Источники

- https://www.php.net/
- https://proglib.io/