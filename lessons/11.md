[оглавление](../README.md)



## 11. Подключения файлов (include, include_once, require, require_once)

PHP позволяет вызывать один сценарий из другого. Специальная конструкция языка позволяет вызывать код из отдельного файла (указывается путь к файлу). Это инструкции `require` и `include`.

Эти инструкции позволяют разбить текст программы на несколько файлов. Рассмотрим, например, `require`. Ее формат такой:

``` php
require имя_файла;
```

 При запуске программы интерпретатор просто заменит инструкцию на содержимое файла `имя_файла` (этот файл может также содержать как сценарий на PHP, обрамленный, как обычно, тегами, так и любой другой текстовый файл, например HTML страница). Это бывает довольно удобно для включения в вывод сценария всяких "шапок" с HTML-кодом.

Например:

Файл `header.html`:

```html
<!DOCTYPE html>
<html lang="ru"> 
<head>
    <title>Демонстрация конструкции require</title>
    <meta charset='utf-8'>
</head>
<body>
<b><pre> 
```
Файл `script.php`:

```php
<?php 
## Тело скрипта
require "head.html";
print_r($GLOBALS);
require "foot.html";
```

Файл `footer.html`:

```html
<!-- "Подвал". -->
</pre></b>
&copy;Warner Bros., 1999.
</body>
</html> 
```



## 11.1. Зачем разделять и подключать php-сценарии

Во время разработки приложений, весь код дробится на отдельные сценарии. Делается это для упрощения процесса программирования. Если бы весь код приложения хранился в одном файле, его невозможно было бы поддерживать.
Так же, если вынести повторяющиеся блоки кода в отдельные php - файлы, появляется возможность повторного использования этих блоков. Например написание пользовательских функций. 



## 11.2. Способы подключения файлов

Для подключения файлов в PHP есть две языковых конструкции: `require` и `require_once`. 
Инструкция require_once работает точно так же, как и require, но за одним важным исключением. Если она видит, что затребованный файл уже был ранее включен, то ничего не делает. Такой метод работы требует от PHP хранения полных имен всех подсоединенных файлов внутри интерпретатора. 

Инструкции `include/include_once` работают совершенно аналогично инструкциям `require/require_once`, но в случае невозможности найти включаемый файл работа скрипта продолжается, а не завершается немедленно. 

### Примеры подключения файлов

Для начала посмотрим, как просто подключить один сценарий внутри другого. Для этого воспользуемся инструкцией `require`. Предположим, у нас есть два сценария: `index.php` и `sub.php`.

Ниже приведен пример, как можно подключить один сценарий (`subject.php`) внутри другого (`index.php`). Используем инструкцию `require`. 

Содержимое файла ``subject.php`:

```php
<?php
print("Содержимое subject.php" . PHP_EOL);
```

В файле `index.php` находится код, который подключит сценарий `sub.php`:

```php
<?php
require 'subject.php';
print("Содержимое index.php" . PHP_EOL);
```

Кстати, `require` можно использовать как ключевое слово, либо как функцию.
Результат будет одним и тем же:

```php
<?php
require('subject.php'); // использование как функции
print("Содержимое index.php" . PHP_EOL);
```

**Результат работы:**

```
Содержимое subject.php
Содержимое index.php
```

В итоге два сценария объединились: выполнилось содержимое `subject.php` и добавилось в начало сценария `index.php`.



## 11.3. Абсолютные и относительные пути

Во время подключения файла, необходимо указывать его адрес. В качестве адреса указывается абсолютный или относительный путь.

**Абсолютный** путь  - это полный адрес файла в файловой системе, начиная с корня диска:
Пример: `/var/www/web/site/services/subject.php`

**Относительный** путь включает в себя адрес относительно текущего рабочего каталога. К примеру, если сценарий лежит в папке `/var/www/web/site`, то, что бы подключить файл, можно использовать путь: `services/subject.php`
Предпочтительнее использовать относительные пути, так как, если вдруг сайт переместят в другую папку, он сможет работать дальше, ведь относительная адресация не будет нарушена.

### Полезные константы

В PHP имеются предустановленные константы, которые могут пригодиться при описании пути к подключаемым файлам.

`__DIR__` — Полный путь к директории, в которой находится текущий php сценарий
`__FILE__` — Полный путь к собственно текущему php сценарию



### Источники

- https://www.php.net/
- PHP7. Дмитрий Котеров, Игорь Симдянов



[оглавление](../README.md)